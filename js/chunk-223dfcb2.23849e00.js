(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-223dfcb2","chunk-105effa0"],{1906:function(t,e,a){},3786:function(t,e,a){"use strict";a.d(e,"c",(function(){return i})),a.d(e,"b",(function(){return n})),a.d(e,"a",(function(){return o})),a.d(e,"d",(function(){return l}));var s=a("b775");function i(t){return Object(s["b"])({url:"admin/rule",method:"get",params:t})}function n(t){return Object(s["b"])({url:"admin/rule",method:"delete",data:t})}function o(t){return Object(s["b"])({url:"admin/rule",method:"put",data:t})}function l(t){return Object(s["b"])({url:"admin/rule",method:"post",data:t})}},4836:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-modal",{attrs:{width:t.modelWidth,visible:t.visible,okText:t.titleList[t.model],cancelText:"取消","destroy-on-close":!0},on:{ok:t.submit,cancel:t.handelColse}},[a("div",[a("div",{staticClass:"model_title"},[t._v(" "+t._s(t.titleList[t.model])+" ")]),a("a-form",[a("a-row",[a("a-col",{attrs:{span:12}},[a("div",{staticClass:"form_item"},[a("div",{staticClass:"form_title"},[t._v("api名称：")]),a("a-input",{staticClass:"form_input",attrs:{value:t.form.name,"default-value":t.form.name,placeholder:"请输入部门名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)]),a("a-col",{attrs:{span:12}},[a("div",{staticClass:"form_item"},[a("div",{staticClass:"form_title"},[t._v("请求地址：")]),a("a-input",{staticClass:"form_input",attrs:{value:t.form.url,"default-value":t.form.url,placeholder:"请输入部门名称"},model:{value:t.form.url,callback:function(e){t.$set(t.form,"url",e)},expression:"form.url"}})],1)]),a("a-col",{attrs:{span:12}},[a("div",{staticClass:"form_item"},[a("div",{staticClass:"form_title"},[t._v("请求方式：")]),a("a-select",{staticStyle:{width:"60%"},attrs:{"show-search":"",value:t.form.method,"show-arrow":!1,"not-found-content":null},on:{change:t.handleChange}},t._l(t.serchClickList,(function(e){return a("a-select-option",{key:e.value,staticStyle:{"border-radius":"0"},attrs:{value:e.value}},[t._v(" "+t._s(e.title)+" ")])})),1)],1)]),a("a-col",{attrs:{span:12}},[a("div",{staticClass:"form_item"},[a("div",{staticClass:"form_title"},[t._v("父极：")]),a("a-select",{staticStyle:{width:"60%"},attrs:{"show-search":"",placeholder:"请选择上级路由","default-value":t.form.parentId,"show-arrow":!1,"not-found-content":null},on:{change:t.handleParentChange}},t._l(t.tabledata,(function(e,s){return a("a-select-option",{key:s,attrs:{value:e.id}},[a("span",{staticStyle:{float:"left"}},[t._v(t._s(e.name))])])})),1)],1)]),a("a-col",{attrs:{span:12}},[a("div",{staticClass:"form_item"},[a("div",{staticClass:"form_title"},[t._v("状态：")]),a("a-switch",{attrs:{value:t.form.status},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}})],1)]),a("a-col",{attrs:{span:24}},[a("div",{staticClass:"form_item"},[a("div",{staticClass:"form_title"},[t._v("api备注：")]),a("a-input",{staticClass:"form_textarea",attrs:{"default-value":t.form.describe,value:t.form.describe,type:"textarea",placeholder:"请输入名称"},model:{value:t.form.describe,callback:function(e){t.$set(t.form,"describe",e)},expression:"form.describe"}})],1)])],1)],1)],1)])},i=[],n=(a("b0c0"),a("a9e3"),a("3786")),o=a("13bb"),l=[{title:"get",value:"get"},{title:"post",value:"post"},{title:"put",value:"put"},{title:"delete",value:"delete"}],r={props:{visible:{type:Boolean,required:!0},model:{type:Number,default:function(){return 0}},formData:{type:[String,Object],default:function(){}}},data:function(){return{titleList:["新建","编辑"],form:{id:0,name:"",describe:"",method:"",status:!0,parentId:0},serchClickList:l,tabledata:[],modelWidth:this.$store.getters.modelWidth}},components:{IconSelector:o["a"]},created:function(){this.getAuthListInit()},methods:{setData:function(t){this.form.id=t.id,this.form.name=t.name,this.form.describe=t.describe,this.form.url=t.url,this.form.method=t.method,this.form.parentId=t.parentId,0===t.status?this.form.status=!0:this.form.status=!1},getAuthListInit:function(){var t=this;Object(n["c"])({page:1,pageSize:10}).then((function(e){if(200===e.code){var a=[];if(e.data.list.length>0)for(var s in e.data.list)a.push({name:e.data.list[s].name,id:e.data.list[s].id});t.tabledata=a}}))},handelColse:function(){this.form={id:0,name:"",describe:"",method:"",status:!0,parentId:0},this.$emit("cancel")},handleChange:function(t){this.form.method=t},handleParentChange:function(t){this.form.parentId=t},submit:function(){var t=this,e=this.form.status?0:1;0===this.model?Object(n["a"])({name:this.form.name,describe:this.form.describe,method:this.form.method,parentId:this.form.parentId,url:this.form.url,status:e}).then((function(e){200===e.code?(t.$message.success("添加成功"),t.handelColse()):t.$message.error("添加失败")})):Object(n["d"])({id:this.form.id,name:this.form.name,describe:this.form.describe,method:this.form.method,parentId:this.form.parentId,url:this.form.url,status:e}).then((function(e){200===e.code?(t.$message.success("修改成功"),t.handelColse()):t.$message.error("修改失败")}))}}},c=r,u=(a("eaab"),a("0c7c")),d=Object(u["a"])(c,s,i,!1,null,"5f21c070",null);e["default"]=d.exports},"9a83":function(t,e,a){"use strict";var s=a("f4b4"),i=a.n(s);i.a},cd7c:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("page-header-wrapper",{attrs:{title:!1}},[a("a-card",{attrs:{loading:t.loading,bordered:!1}},[a("div",{staticClass:"table_header",staticStyle:{display:"flex","justify-content":"space-between","padding-right":"20px"}},[a("div",[a("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:t.addUser}},[t._v(" 新建 ")]),a("a-button",{staticStyle:{"margin-left":"10px"},attrs:{icon:"delete",disabled:t.isOpenExport},on:{click:t.deleteRouter}},[t._v(" 删除api ")]),a("a-button",{staticStyle:{"margin-left":"10px"},attrs:{icon:"disconnect",disabled:t.isOpenExport},on:{click:t.closeRule}},[t._v(" 暂停api ")]),a("a-button",{staticStyle:{"margin-left":"10px"},attrs:{icon:"link",disabled:t.isOpenExport},on:{click:t.openRule}},[t._v(" 激活api ")])],1),a("div",{staticClass:"headInput"},[a("a-select",{staticClass:"serchInput",attrs:{"default-value":t.serchList[0].dataIndex},on:{change:t.handleSearchChange}},t._l(t.serchList,(function(e,s){return a("a-select-option",{key:s,attrs:{value:e.dataIndex}},[t._v(" "+t._s(e.title)+" ")])})),1),a("a-select",{staticStyle:{width:"200px","border-radius":"0px"},attrs:{"show-search":"",value:t.serchvalue},on:{search:t.handleSearch,change:t.handleChange}},t._l(t.serchClickList,(function(e){return a("a-select-option",{key:e.value,staticStyle:{"border-radius":"0px"},attrs:{value:e.value}},[t._v(" "+t._s(e.title)+" ")])})),1),a("a-button",{attrs:{icon:"search",type:"primary"}},[t._v(" 查找 ")]),a("a-popover",{attrs:{trigger:"click",placement:"left"}},[a("template",{slot:"title"},[t._v(" 自定义显示列表 ")]),a("template",{slot:"content"},[a("a-checkbox-group",{staticClass:"checkGroup",attrs:{options:t.checkColums},on:{change:t.onChage},model:{value:t.hasCheckColums,callback:function(e){t.hasCheckColums=e},expression:"hasCheckColums"}})],1),a("a-button",{staticClass:"popuerButton",attrs:{icon:"ordered-list",type:"primary"}},[t._v(" 列表 ")])],2)],1)]),a("a-table",{staticStyle:{"margin-top":"10px"},attrs:{id:"components-table-demo-size",columns:t.showColums,pagination:!1,"data-source":t.tabledata,rowKey:"id",defaultExpandAllRows:!0,"row-selection":t.rowSelection},scopedSlots:t._u([{key:"name",fn:function(e,s){return[a("span",[a("span",{staticClass:"table_name",staticStyle:{"margin-left":"10px"},on:{click:function(e){return t.openDialogName(s)}}},[t._v(t._s(e))])])]}},{key:"method",fn:function(e){return[a("span",[e?a("a-tag",{attrs:{color:t._f("methodFitter")(e)}},[t._v(t._s(e||"-"))]):t._e()],1)]}},{key:"status",fn:function(e){return[a("span",[a("a-badge",{attrs:{status:t._f("statusTypeFilter")(e),text:t._f("statusFilter")(e)}})],1)]}},{key:"buildOptionText",fn:function(e){return["50"!==e.value?a("span",[t._v(t._s(e.value)+"条/页")]):t._e(),"50"===e.value?a("span",[t._v("全部")]):t._e()]}}])})],1),a("auth-panle",{ref:"authModal",attrs:{visible:t.visible,model:t.showType,formData:t.formData},on:{cancel:t.handleCancel}})],1)},i=[],n=(a("d81d"),a("b0c0"),a("4836")),o=a("3786"),l=[{title:"api名称",width:180,dataIndex:"name",key:"1",fixed:"left",scopedSlots:{customRender:"name"}},{title:"访问方法",dataIndex:"method",key:"2",scopedSlots:{customRender:"method"}},{title:"创建时间",dataIndex:"updateTime",key:"4"},{title:"权限api",dataIndex:"url",key:"8"},{title:"状态",dataIndex:"status",key:"6",scopedSlots:{customRender:"status"}},{title:"备注",dataIndex:"describe",key:"5"}],r={post:{status:"pink"},put:{status:"orange"},get:{status:"green"},delete:{status:"red"}},c={0:{status:"success",text:"正常"},1:{status:"default",text:"关闭"}},u=[{title:"名称",dataIndex:"name"},{title:"请求方式",dataIndex:"method"},{title:"请求api",dataIndex:"api"},{title:"状态",dataIndex:"status"}],d={name:"Agent",data:function(){return{loading:!0,tabledata:[],columns:l,hasCheckColums:[],checkColums:[],selectedRowKeys:[],showColums:[],isOpenExport:!0,serchList:u,value:"",showType:0,visible:!1,baseVisible:!1,baseType:"",baseAgentId:0,hasChildren:!1,formData:{},serchClickList:[],serchvalue:"",nameSerchList:[],urlList:[]}},components:{authPanle:n["default"]},filters:{methodFitter:function(t){return r[t].status},statusFilter:function(t){return c[t].text},statusTypeFilter:function(t){return c[t].status}},activated:function(){var t=this;this.checkGroupInit(),this.getMenuListInit();var e=[],a=[];Object(o["c"])({page:1,pageSize:10,fold:!1}).then((function(s){200===s.code&&s.data.list.length&&(s.data.list.map((function(s){var i={title:s.name,value:s.id};if(s.url){var n={title:s.url,value:s.url};t.checkArray(a,n)}e.push(i)})),t.nameSerchList=e,t.urlList=a)}))},computed:{rowSelection:function(){var t=this;return{onChange:function(e,a){e.length>0?(t.isOpenExport=!1,t.selectedRowKeys=e):t.isOpenExport=!0}}}},methods:{checkArray:function(t,e){for(var a=0;a<t.length;a+=1)if(t[a].title===e.title)return;t.push(e)},getMenuListInit:function(){var t=this;Object(o["c"])({page:1,pageSize:999,fold:!0}).then((function(e){t.loading=!1,200===e.code&&(t.tabledata=e.data.list)}))},deleteRouter:function(){var t=this.selectedRowKeys,e=this;this.$confirm({title:"你确定要删除吗？",content:"如果这个路由下存在子路由，删除也会将下方的子路由一并删除！",okText:"确定",okType:"danger",cancelText:"取消",onOk:function(){Object(o["b"])({idList:t}).then((function(t){200===t.code?(e.$message.success("删除成功"),e.getMenuListInit(),e.isOpenExport=!0):e.$message.error("删除失败")}))}})},closeRule:function(){var t=this.selectedRowKeys,e=this;this.$confirm({title:"你确定要暂停吗？？",content:"如果这个api下存在子api，暂停也会将下方的子路由一并暂停，所有用户都将不得访问！",okText:"确定",okType:"danger",cancelText:"取消",onOk:function(){Object(o["d"])({idList:t,status:1}).then((function(t){200===t.code?(e.$message.success("暂停成功"),e.getMenuListInit(),e.isOpenExport=!0):e.$message.error("暂停失败")}))}})},openRule:function(){var t=this.selectedRowKeys,e=this;this.$confirm({title:"你确定要激活吗？？",content:"如果这个api下存在子api，激活也会将下方的子路由一并激活！",okText:"确定",okType:"danger",cancelText:"取消",onOk:function(){Object(o["d"])({idList:t,status:0}).then((function(t){200===t.code?(e.$message.success("激活成功"),e.getMenuListInit(),e.isOpenExport=!1,e.selectedRowKeys=[]):e.$message.error("激活失败")}))}})},checkGroupInit:function(){var t=this.columns,e=[],a=[],s=[];t.map((function(t){var i={},n=String(t.dataIndex);a.push(n),s.push(t),i.label=t.title,i.value=String(t.dataIndex),e.push(i)})),this.hasCheckColums=a,this.checkColums=e,this.showColums=s,this.loading=!1},onChage:function(t){var e,a=this;0!==t.length&&function(){var s=[];for(e in t)l.map((function(a){t[e]===a.dataIndex&&s.push(a)}));a.showColums=s}()},handleSearch:function(t){},handleChange:function(t){this.serchvalue=t},handleOnchage:function(t){},openDialogName:function(t){this.visible=!0,this.showType=1,this.$refs.authModal.setData(t)},addUser:function(){this.visible=!0,this.showType=0,this.userData={}},handleCancel:function(){this.visible=!1,this.showType=0,this.getMenuListInit()},gotoAgentDetails:function(t){},handleBaseCancel:function(){this.baseVisible=!1,this.baseType=""},handleSearchChange:function(t){this.serchClickList="name"===t?this.nameSerchList:"method"===t?[{title:"get",value:"get"},{title:"post",value:"post"},{title:"put",value:"put"},{title:"delete",value:"delete"}]:"api"===t?this.urlList:[{title:"开启",value:0},{title:"关闭",value:1}]}}},h=d,m=(a("9a83"),a("0c7c")),f=Object(m["a"])(h,s,i,!1,null,"3bc1ab76",null);e["default"]=f.exports},eaab:function(t,e,a){"use strict";var s=a("1906"),i=a.n(s);i.a},f4b4:function(t,e,a){}}]);