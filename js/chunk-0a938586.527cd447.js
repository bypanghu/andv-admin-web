(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0a938586"],{ac2a:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main"},[a("div",{staticClass:"main_panle"},[a("div",{staticClass:"login_form",staticStyle:{"['width'":"modelWidth]"}},[a("div",{staticClass:"login_form_title "},[t._v(" 欢迎登录后台管理系统 ")]),a("div",{staticClass:"login_form_panle"},[a("a-form",{ref:"formLogin",staticClass:"user-layout-login_form",attrs:{id:"formLogin",form:t.form},on:{submit:t.handleSubmit}},[a("a-tabs",{attrs:{activeKey:t.customActiveKey,tabBarStyle:{textAlign:"center",borderBottom:"unset"}},on:{change:t.handleTabClick}},[a("a-tab-pane",{key:"tab1",attrs:{tab:"账号密码"}},[t.isLoginError?a("a-alert",{staticStyle:{"margin-bottom":"24px"},attrs:{type:"error",showIcon:"",message:"账号密码错误"}}):t._e(),a("a-form-item",[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["username",{rules:[{required:!0,message:"手机号码必须填写"},{validator:t.handleUsernameOrEmail}],validateTrigger:"change"}],expression:"[\n                    'username',\n                    {rules: [{ required: true, message:'手机号码必须填写'}, { validator: handleUsernameOrEmail }], validateTrigger: 'change'}\n                  ]"}],staticClass:"form_item_input",attrs:{size:"large",type:"text",placeholder:"请输入账号",autocomplete:""}},[a("a-icon",{style:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"user"},slot:"prefix"})],1)],1),a("a-form-item",[a("a-input-password",{directives:[{name:"decorator",rawName:"v-decorator",value:["password",{rules:[{required:!0,message:"密码必须填写"}],validateTrigger:"blur"}],expression:"[\n                    'password',\n                    {rules: [{ required: true, message: '密码必须填写' }], validateTrigger: 'blur'}\n                  ]"}],staticClass:"form_item_input",attrs:{size:"large",placeholder:"请输入密码",autocomplete:""}},[a("a-icon",{style:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"lock"},slot:"prefix"})],1)],1)],1),a("a-tab-pane",{key:"tab2",attrs:{tab:"验证码登陆"}},[a("a-form-item",[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["mobile",{rules:[{required:!0,pattern:/^1[34578]\d{9}$/,message:"请输入手机号码"}],validateTrigger:"change"}],expression:"['mobile', {rules: [{ required: true, pattern: /^1[34578]\\d{9}$/, message:'请输入手机号码' }], validateTrigger: 'change'}]"}],staticClass:"form_item_input",attrs:{size:"large",type:"text",placeholder:"请输入手机号码"}},[a("a-icon",{style:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"mobile"},slot:"prefix"})],1)],1),a("a-row",{attrs:{gutter:16}},[a("a-col",{staticClass:"gutter-row",attrs:{span:16}},[a("a-form-item",[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["captcha",{rules:[{required:!0,message:"请输入验证码"}],validateTrigger:"blur"}],expression:"['captcha', {rules: [{ required: true, message:'请输入验证码' }], validateTrigger: 'blur'}]"}],staticClass:"form_item_input",attrs:{size:"large",type:"text",placeholder:"请输入验证码"}},[a("a-icon",{style:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"mail"},slot:"prefix"})],1)],1)],1),a("a-col",{staticClass:"gutter-row",attrs:{span:8}},[a("a-button",{staticClass:"getCaptcha",attrs:{tabindex:"-1",disabled:t.state.smsSendBtn},domProps:{textContent:t._s(t.state.smsSendBtn?"已发送"+t.state.time+" s":"获取验证码")},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.getCaptcha(e)}}})],1)],1)],1)],1),a("a-form-item",{staticStyle:{"margin-top":"24px"}},[a("a-button",{staticClass:"login-button",attrs:{size:"large",type:"primary",htmlType:"submit",loading:t.state.loginBtn,disabled:t.state.loginBtn}},[t._v("登录")])],1),a("a-form-item",{staticStyle:{"margin-top":"24px"}},[a("div",{staticClass:"login_other"},[a("div",{staticClass:"login_other_p"},[a("p",{staticStyle:{"margin-bottom":"-10px"}},[t._v("第三方登陆")]),a("a-icon",{staticStyle:{color:"#24db5a","font-size":"23px"},attrs:{type:"wechat",theme:"filled"}})],1)])])],1)],1)])])])},s=[],r=(a("d3b7"),a("5530")),o=a("5880"),n=a("ca00"),l={name:"Login",data:function(){return{customActiveKey:"tab1",loginBtn:!1,loginType:0,isLoginError:!1,requiredTwoStepCaptcha:!1,stepCaptchaVisible:!1,form:this.$form.createForm(this),state:{time:60,loginBtn:!1,loginType:0,smsSendBtn:!1},modelWidth:this.$store.getters.modelWidth}},methods:Object(r["a"])(Object(r["a"])({},Object(o["mapActions"])(["Login","Logout"])),{},{handleUsernameOrEmail:function(t,e,a){var i=this.state,s=/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+((\.[a-zA-Z0-9_-]{2,3}){1,2})$/;s.test(e)?i.loginType=0:i.loginType=1,a()},handleTabClick:function(t){this.customActiveKey=t},handleSubmit:function(t){var e=this;t.preventDefault();var a=this.form.validateFields,i=this.state,s=this.customActiveKey,o=this.Login;i.loginBtn=!0;var n="tab1"===s?["username","password"]:["mobile","captcha"];a(n,{force:!0},(function(t,a){if(t)setTimeout((function(){i.loginBtn=!1}),600);else{var s=Object(r["a"])({},a);delete s.username,s[i.loginType?"phone":"email"]=a.username,s.password=a.password,s.type="web",o(s).then((function(t){return e.loginSuccess(t)})).catch((function(t){return e.requestFailed(t)})).finally((function(){i.loginBtn=!1}))}}))},getCaptcha:function(t){var e=this;t.preventDefault();var a=this.form.validateFields,i=this.state;a(["mobile"],{force:!0},(function(t,a){if(!t){i.smsSendBtn=!0;var s=window.setInterval((function(){i.time--<=0&&(i.time=60,i.smsSendBtn=!1,window.clearInterval(s))}),1e3),r=e.$message.loading("验证码发送中..",0);setTimeout(r,1e3)}}))},stepCaptchaSuccess:function(){this.loginSuccess()},stepCaptchaCancel:function(){var t=this;this.Logout().then((function(){t.loginBtn=!1,t.stepCaptchaVisible=!1}))},loginSuccess:function(t){var e=this;this.$router.push({path:"/"}),setTimeout((function(){e.$notification.success({message:"欢迎",description:"".concat(Object(n["b"])(),"，欢迎回来")})}),1e3),this.isLoginError=!1},requestFailed:function(t){this.isLoginError=!0,this.$notification["error"]({message:"错误",description:((t.response||{}).data||{}).message||"请求出现错误，请稍后再试",duration:4})}})},c=l,m=(a("d6bf"),a("0c7c")),u=Object(m["a"])(c,i,s,!1,null,"94aa5284",null);e["default"]=u.exports},c94e:function(t,e,a){},d6bf:function(t,e,a){"use strict";var i=a("c94e"),s=a.n(i);s.a}}]);